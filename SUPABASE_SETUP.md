
# 游 Configuraci칩n de Supabase para AKRO Admin

Sigue estos pasos para configurar tu backend en Supabase.

## 1. Crear Proyecto
1. Ve a [supabase.com](https://supabase.com) y crea una cuenta.
2. Crea un nuevo proyecto llamado `akro-admin`.
3. Establece una contrase침a fuerte para la base de datos.
4. Espera a que se cree el proyecto.

## 2. Obtener Claves de API
1. En tu proyecto de Supabase, ve a **Settings** -> **API**.
2. Copia la `Project URL` y la `publishable` Key.
3. Crea un archivo `.env` en la ra칤z de este proyecto (puedes copiar `.env.example`).
4. Pega las claves:
   ```env
   VITE_SUPABASE_URL=tu_project_url
   VITE_SUPABASE_PUBLISHABLE_KEY=tu_publishable_key
   ```

## 3. Configurar Autenticaci칩n
1. Ve a **Authentication** -> **Providers**.
2. Aseg칰rate de que **Email** est치 habilitado.
3. Deshabilita "Confirm email" si quieres probar r치pido sin verificar correo:
   - Ve a **Authentication** -> **URL Configuration** (o **Providers** -> **Email** settings dependiendo de la versi칩n).
   - Desactiva "Confirm email".
4. Crea un usuario desde el panel de Supabase:
   - Ve a **Authentication** -> **Users**.
   - Haz clic en "Invite user" o usa el bot칩n de "Add User" si existe, o simplemente reg칤strate desde la app (pero como es un admin dashboard, mejor crea el usuario manualmente o usa la API).
   - Para probar, puedes intentar registrarte si agregas un formulario de registro, pero este c칩digo solo tiene Login.
   - **Opci칩n recomendada**: Usa el cliente de Supabase o SQL para crear un usuario, o simplemente habilita el registro temporalmente en tu c칩digo si quisieras.
   - **M치s f치cil**: Ve a la pesta침a **Table Editor**, selecciona `auth.users` (schema auth) y ver치s los usuarios ah칤.
   - Para crear tu primer usuario admin, puedes ir a **Authentication** -> **Users** -> **Invite User** y enviarte un correo, o usar el bot칩n **Add User** -> **Create new user** (ingresa email y pass).

## 4. Crear Tabla para el Dashboard
Para que el dashboard muestre datos, crea una tabla llamada `dashboard_metrics`.

1. Ve al **SQL Editor** en Supabase.
2. Ejecuta el siguiente script SQL:

```sql
-- Crear la tabla
CREATE TABLE public.dashboard_metrics (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  label TEXT NOT NULL,
  value TEXT NOT NULL,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()) NOT NULL
);

-- Habilitar RLS (Seguridad a nivel de fila)
ALTER TABLE public.dashboard_metrics ENABLE ROW LEVEL SECURITY;

-- Crear pol칤tica de lectura para usuarios autenticados
CREATE POLICY "Permitir lectura a usuarios autenticados"
ON public.dashboard_metrics
FOR SELECT
TO authenticated
USING (true);

-- Insertar datos de prueba
INSERT INTO public.dashboard_metrics (label, value)
VALUES 
  ('Ingresos Totales', '$124,500'),
  ('Usuarios Activos', '1,234'),
  ('Ventas del Mes', '85'),
  ('Tasa de Conversi칩n', '3.2%');
```

## 5. Ejecutar el Proyecto
1. Aseg칰rate de haber instalado dependencias: `npm install`
2. Ejecuta: `npm run dev`
3. Abre `http://localhost:5173`
4. Inicia sesi칩n con el usuario que creaste.
